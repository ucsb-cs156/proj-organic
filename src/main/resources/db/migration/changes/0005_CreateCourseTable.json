{ "databaseChangeLog": [
  {
    "changeSet": {
      "id": "changeset_0005a",
      "author": "pconrad",
      "preConditions": [
        {
          "onFail": "MARK_RAN"
        },
        {
          "not": [
            {
              "tableExists": {
                "tableName": "COURSES"
              }
            }
          ]
        }
      ],
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "autoIncrement": true,
                  "constraints": {
                    "primaryKey": true,
                    "primaryKeyName": "ID"
                  },
                  "name": "ID",
                  "type": "BIGINT"
                }
              },
              {
                "column": {
                  "name": "END",
                  "type": "TIMESTAMP"
                }
              },
              {
                "column": {
                  "name": "GITHUB_ORG",
                  "type": "VARCHAR(255)"
                }
              },
              {
                "column": {
                  "name": "NAME",
                  "type": "VARCHAR(255)"
                }
              },
              {
                "column": {
                  "name": "SCHOOL",
                  "type": "VARCHAR(255)"
                }
              },
              {
                "column": {
                  "name": "START",
                  "type": "TIMESTAMP"
                }
              },
              {
                "column": {
                  "name": "TERM",
                  "type": "VARCHAR(255)"
                }
              }]
            ,
            "tableName": "COURSES"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "changeset_0005b",
      "author": "pconrad",
      "preConditions": [
        {
          "onFail": "MARK_RAN"
        },
        {
          "not": [
            {
              "tableExists": {
                "tableName": "COURSE_STAFF"
              }
            }
          ]
        }
      ],
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "primaryKey": true,
                    "primaryKeyName": "COURSE_ID"
                  },
                  "name": "COURSE_ID",
                  "type": "BIGINT"
                }
              },
              {
                "column": {
                  "constraints": {
                    "primaryKey": true,
                    "primaryKeyName": "USER_GITHUB_ID"
                  },
                  "name": "USER_GITHUB_ID",
                  "type": "INT"
                }
              }]
            ,
            "tableName": "COURSE_STAFF"
          }
        }]
      
    }
  },
  
 
  
  {
    "changeSet": {
      "id": "changeset_0005c",
      "author": "pconrad",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "USER_GITHUB_ID"
                }
              }]
            ,
            "indexName": "COURSE_STAFF_USER_GITHUB_ID_INDEX",
            "tableName": "COURSE_STAFF"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "changeset_0005d",
      "author": "pconrad",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "COURSE_ID"
                }
              }]
            ,
            "indexName": "COURSE_STAFF_COURSE_ID_INDEX",
            "tableName": "COURSE_STAFF"
          }
        }]
      
    }
  },
  
  
  {
    "changeSet": {
      "id": "changeset_0005e",
      "author": "pconrad",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "USER_GITHUB_ID",
            "baseTableName": "COURSE_STAFF",
            "constraintName": "COURSE_STAFF_USER_GITHUB_ID_FK",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "RESTRICT",
            "onUpdate": "RESTRICT",
            "referencedColumnNames": "GITHUB_ID",
            "referencedTableName": "USERS",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "changeset_0005f",
      "author": "pconrad",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "COURSE_ID",
            "baseTableName": "COURSE_STAFF",
            "constraintName": "COURSE_STAFF_COURSE_ID_FK",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "RESTRICT",
            "onUpdate": "RESTRICT",
            "referencedColumnNames": "ID",
            "referencedTableName": "COURSES",
            "validate": true
          }
        }]
      
    }
  }
  
]}